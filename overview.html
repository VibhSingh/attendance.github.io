<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance: Overview</title>
<link rel="stylesheet" type="text/css" href="styles.css">

</head>
<body>

<div class="navbar">
  <a href="index.html">Home</a>
  <a href="overview.html">Overview</a>
</div>

<div class="container">
  <h1>Attendance Percentage</h1>
  <div class="attendance-percentage">
    <table>
      <thead>
        <tr>
          <th>Class</th>
          <th>Attendance</th>
        </tr>
      </thead>
      <tbody id="attendancePercentageTableBody">
        <!-- Attendance percentage meter bars for each class will be populated here -->
      </tbody>
    </table>
  </div>
</div>

<script src="script.js"></script>
<script>
window.onload = function() {
  // Function to calculate attendance percentage for each class
  function calculateAttendancePercentage(attendanceData) {
    const totalDays = attendanceData.present + attendanceData.absent;
    return totalDays > 0 ? ((attendanceData.present / totalDays) * 100).toFixed(2) : 0;
  }

  // Function to populate attendance percentage meter bars for each class
  function populateAttendancePercentage() {
    const attendancePercentageTableBody = document.getElementById('attendancePercentageTableBody');

    // Loop through each class
    for (let i = 1; i <= 26; i++) {
      const subject = `subject${i}`;
      const attendanceData = JSON.parse(localStorage.getItem(`${subject}_attendanceData`)) || { "present": 0, "absent": 0 };
      const attendancePercentage = calculateAttendancePercentage(attendanceData);

      // Determine meter bar color based on attendance percentage
      const barColorClass = attendancePercentage < 75 ? 'red' : 'green';

      // Create table row with meter bar and percentage
      const row = document.createElement('tr');
      row.innerHTML = `<td>Subject ${i}</td><td><div class="meter-container"><div class="meter-bar ${barColorClass}" style="width: ${attendancePercentage}%;"></div></div><div class="percentage">${attendancePercentage}%</div></td>`;
      attendancePercentageTableBody.appendChild(row);
    }
  }

  // Call function to populate attendance percentage meter bars
  populateAttendancePercentage();
};
</script>

</body>
</html>
