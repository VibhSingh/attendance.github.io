<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance: Overview</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<style>
  .navbar {
    background-color: #333;
    overflow: hidden;
  }

  .navbar a {
    float: left;
    display: block;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
  }

  .navbar a:hover {
    background-color: #ddd;
    color: black;
  }

  .meter-container {
    display: flex;
    align-items: center;
    background-color: #f0f0f0;
    border-radius: 5px;
    margin-bottom: 10px;
    overflow: hidden;
    height: 25px;
  }

  .meter-bar {
    height: 100%;
    transition: width 0.3s ease-in-out;
  }

  .percentage {
    text-align: center;
    color: black;
    font-weight: bold;
    margin-left: 10px;
  }

  .green {
    background-color: #4caf50; /* Green */
  }

  .red {
    background-color: #f44336; /* Red */
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }

  th {
    background-color: #f2f2f2;
  }

</style>
</head>
<body>

<div class="navbar">
  <a href="index.html">Home</a>
  <a href="overview.html">Overview</a>
</div>

<div class="container">
  <h1>Attendance Percentage</h1>
  <div class="attendance-percentage">
    <table>
      <thead>
        <tr>
          <th>Class</th>
          <th>Attendance</th>
        </tr>
      </thead>
      <tbody id="attendancePercentageTableBody">
        <!-- Attendance percentage meter bars for each class will be populated here -->
      </tbody>
    </table>
  </div>
</div>

<script src="script.js"></script>
<script>
window.onload = function() {
  // Function to calculate attendance percentage for each class
  function calculateAttendancePercentage(attendanceData) {
    const totalDays = attendanceData.present + attendanceData.absent;
    return totalDays > 0 ? ((attendanceData.present / totalDays) * 100).toFixed(2) : 0;
  }

  // Function to populate attendance percentage meter bars for each class
  function populateAttendancePercentage() {
    const attendancePercentageTableBody = document.getElementById('attendancePercentageTableBody');

    // Loop through each class
    for (let i = 1; i <= 26; i++) {
      const subject = `subject${i}`;
      const attendanceData = JSON.parse(localStorage.getItem(`${subject}_attendanceData`)) || { "present": 0, "absent": 0 };
      const attendancePercentage = calculateAttendancePercentage(attendanceData);

      // Determine meter bar color based on attendance percentage
      const barColorClass = attendancePercentage < 75 ? 'red' : 'green';

      // Create table row with meter bar and percentage
      const row = document.createElement('tr');
      row.innerHTML = `<td>Subject ${i}</td><td><div class="meter-container"><div class="meter-bar ${barColorClass}" style="width: ${attendancePercentage}%;"></div></div><div class="percentage">${attendancePercentage}%</div></td>`;
      attendancePercentageTableBody.appendChild(row);
    }
  }

  // Call function to populate attendance percentage meter bars
  populateAttendancePercentage();
};
</script>

</body>
</html>
